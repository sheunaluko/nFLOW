{"id":"J97u","dependencies":[{"name":"/Users/oluwa/dev/webrt_state_machine/package.json","includedInParent":true,"mtime":1540304235496},{"name":"./logger.js","loc":{"line":3,"column":25},"parent":"/Users/oluwa/dev/webrt_state_machine/src/core_modules/web_socket.js","resolved":"/Users/oluwa/dev/webrt_state_machine/src/core_modules/logger.js"},{"name":"../module_resources/utils.js","loc":{"line":4,"column":17},"parent":"/Users/oluwa/dev/webrt_state_machine/src/core_modules/web_socket.js","resolved":"/Users/oluwa/dev/webrt_state_machine/src/module_resources/utils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=require(\"./logger.js\"),t=n(require(\"../module_resources/utils.js\"));function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var o=function(){function n(t){s(this,n),this.url=t,this.connection=null,this.log=(0,e.makeLogger)(\"WS\"),this.default_handler=function(e){this.log(\"No data handler has been defined!\")},this.data_handler=this.default_handler}return i(n,[{key:\"connect\",value:function(){var e=new WebSocket(this.url);e.addEventListener(\"open\",function(e){this.log(\"Connection to \"+this.url+\" successful. Registering client with server.\"),this.send_json({type:\"register\",data:\"client\"}),this.send_json({type:\"control\",data:\"start\"})}.bind(this)),e.addEventListener(\"message\",function(e){this.data_handler(t.default.dict_vals_2_num(JSON.parse(e.data)))}.bind(this)),this.connection=e}},{key:\"start_stream\",value:function(){this.send_json({type:\"control\",data:\"start\"})}},{key:\"stop_stream\",value:function(){this.send_json({type:\"control\",data:\"stop\"})}},{key:\"set_data_handler\",value:function(e){this.data_handler=e}},{key:\"send_json\",value:function(e){this.connection.send(JSON.stringify(e))}}]),n}();exports.default=o;","map":{"mappings":[{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":0}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":13}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":20}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":35}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":43}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":56}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":57}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":64}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":68}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":76}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":89}},{"source":"core_modules/web_socket.js","original":{"line":3,"column":0},"generated":{"line":1,"column":91}},{"source":"core_modules/web_socket.js","original":{"line":3,"column":0},"generated":{"line":1,"column":95}},{"source":"core_modules/web_socket.js","original":{"line":3,"column":0},"generated":{"line":1,"column":97}},{"source":"core_modules/web_socket.js","original":{"line":3,"column":0},"generated":{"line":1,"column":105}},{"source":"core_modules/web_socket.js","original":{"line":4,"column":0},"generated":{"line":1,"column":120}},{"source":"core_modules/web_socket.js","original":{"line":4,"column":0},"generated":{"line":1,"column":122}},{"source":"core_modules/web_socket.js","original":{"line":4,"column":0},"generated":{"line":1,"column":124}},{"source":"core_modules/web_socket.js","original":{"line":4,"column":0},"generated":{"line":1,"column":132}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":165}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":174}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":176}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":179}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":186}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":189}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":191}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":202}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":204}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":205}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":213}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":216}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":225}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":227}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":229}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":232}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":237}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":250}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":253}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":259}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":263}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":273}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":310}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":319}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":321}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":323}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":326}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":330}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":334}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":336}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":338}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":340}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":342}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":349}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":353}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":354}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":358}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":360}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":362}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":365}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":367}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":378}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":380}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":393}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":395}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":397}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":411}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":413}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":423}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":427}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":429}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":439}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":442}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":449}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":464}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":466}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":468}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":472}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":476}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":485}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":487}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":489}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":491}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":494}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":501}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":504}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":506}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":508}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":518}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":521}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":524}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":526}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":528}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":531}},{"source":"core_modules/web_socket.js","name":"web_socket","original":{"line":11,"column":21},"generated":{"line":1,"column":533}},{"source":"core_modules/web_socket.js","name":"web_socket","original":{"line":11,"column":21},"generated":{"line":1,"column":537}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":539}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":13,"column":16},"generated":{"line":1,"column":550}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":13,"column":16},"generated":{"line":1,"column":559}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":13,"column":16},"generated":{"line":1,"column":561}},{"source":"core_modules/web_socket.js","original":{"line":13,"column":21},"generated":{"line":1,"column":564}},{"source":"core_modules/web_socket.js","original":{"line":13,"column":21},"generated":{"line":1,"column":566}},{"source":"core_modules/web_socket.js","original":{"line":13,"column":21},"generated":{"line":1,"column":571}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":14,"column":6},"generated":{"line":1,"column":574}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":14,"column":6},"generated":{"line":1,"column":579}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":14,"column":12},"generated":{"line":1,"column":583}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":15,"column":6},"generated":{"line":1,"column":585}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":15,"column":6},"generated":{"line":1,"column":590}},{"source":"core_modules/web_socket.js","original":{"line":15,"column":19},"generated":{"line":1,"column":601}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":16,"column":6},"generated":{"line":1,"column":606}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":16,"column":6},"generated":{"line":1,"column":611}},{"source":"core_modules/web_socket.js","original":{"line":16,"column":12},"generated":{"line":1,"column":616}},{"source":"core_modules/web_socket.js","original":{"line":16,"column":23},"generated":{"line":1,"column":618}},{"source":"core_modules/web_socket.js","original":{"line":16,"column":23},"generated":{"line":1,"column":620}},{"source":"core_modules/web_socket.js","original":{"line":16,"column":23},"generated":{"line":1,"column":632}},{"source":"core_modules/web_socket.js","name":"default_handler","original":{"line":17,"column":6},"generated":{"line":1,"column":638}},{"source":"core_modules/web_socket.js","name":"default_handler","original":{"line":17,"column":6},"generated":{"line":1,"column":643}},{"source":"core_modules/web_socket.js","original":{"line":17,"column":24},"generated":{"line":1,"column":659}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":17,"column":33},"generated":{"line":1,"column":668}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":18,"column":10},"generated":{"line":1,"column":671}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":18,"column":10},"generated":{"line":1,"column":676}},{"source":"core_modules/web_socket.js","original":{"line":18,"column":14},"generated":{"line":1,"column":680}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":20,"column":6},"generated":{"line":1,"column":718}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":20,"column":6},"generated":{"line":1,"column":723}},{"source":"core_modules/web_socket.js","original":{"line":20,"column":21},"generated":{"line":1,"column":736}},{"source":"core_modules/web_socket.js","name":"default_handler","original":{"line":20,"column":26},"generated":{"line":1,"column":741}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":757}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":764}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":766}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":768}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":769}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":770}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":774}},{"source":"core_modules/web_socket.js","original":{"line":28,"column":14},"generated":{"line":1,"column":784}},{"source":"core_modules/web_socket.js","original":{"line":28,"column":14},"generated":{"line":1,"column":790}},{"source":"core_modules/web_socket.js","name":"conn","original":{"line":29,"column":5},"generated":{"line":1,"column":801}},{"source":"core_modules/web_socket.js","name":"conn","original":{"line":29,"column":5},"generated":{"line":1,"column":805}},{"source":"core_modules/web_socket.js","original":{"line":29,"column":13},"generated":{"line":1,"column":807}},{"source":"core_modules/web_socket.js","name":"WebSocket","original":{"line":29,"column":17},"generated":{"line":1,"column":811}},{"source":"core_modules/web_socket.js","original":{"line":29,"column":27},"generated":{"line":1,"column":821}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":29,"column":32},"generated":{"line":1,"column":826}},{"source":"core_modules/web_socket.js","name":"conn","original":{"line":31,"column":1},"generated":{"line":1,"column":831}},{"source":"core_modules/web_socket.js","name":"addEventListener","original":{"line":31,"column":6},"generated":{"line":1,"column":833}},{"source":"core_modules/web_socket.js","original":{"line":31,"column":23},"generated":{"line":1,"column":850}},{"source":"core_modules/web_socket.js","original":{"line":31,"column":32},"generated":{"line":1,"column":857}},{"source":"core_modules/web_socket.js","name":"event","original":{"line":31,"column":42},"generated":{"line":1,"column":866}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":32,"column":10},"generated":{"line":1,"column":869}},{"source":"core_modules/web_socket.js","name":"log","original":{"line":32,"column":10},"generated":{"line":1,"column":874}},{"source":"core_modules/web_socket.js","original":{"line":32,"column":14},"generated":{"line":1,"column":878}},{"source":"core_modules/web_socket.js","original":{"line":32,"column":33},"generated":{"line":1,"column":895}},{"source":"core_modules/web_socket.js","name":"url","original":{"line":32,"column":38},"generated":{"line":1,"column":900}},{"source":"core_modules/web_socket.js","original":{"line":32,"column":44},"generated":{"line":1,"column":904}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":33,"column":10},"generated":{"line":1,"column":952}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":33,"column":10},"generated":{"line":1,"column":957}},{"source":"core_modules/web_socket.js","original":{"line":33,"column":20},"generated":{"line":1,"column":967}},{"source":"core_modules/web_socket.js","name":"type","original":{"line":33,"column":21},"generated":{"line":1,"column":968}},{"source":"core_modules/web_socket.js","original":{"line":33,"column":27},"generated":{"line":1,"column":973}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":33,"column":40},"generated":{"line":1,"column":984}},{"source":"core_modules/web_socket.js","original":{"line":33,"column":47},"generated":{"line":1,"column":989}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":34,"column":10},"generated":{"line":1,"column":1000}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":34,"column":10},"generated":{"line":1,"column":1005}},{"source":"core_modules/web_socket.js","original":{"line":34,"column":20},"generated":{"line":1,"column":1015}},{"source":"core_modules/web_socket.js","name":"type","original":{"line":34,"column":21},"generated":{"line":1,"column":1016}},{"source":"core_modules/web_socket.js","original":{"line":34,"column":27},"generated":{"line":1,"column":1021}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":34,"column":40},"generated":{"line":1,"column":1031}},{"source":"core_modules/web_socket.js","original":{"line":34,"column":47},"generated":{"line":1,"column":1036}},{"source":"core_modules/web_socket.js","name":"bind","original":{"line":35,"column":4},"generated":{"line":1,"column":1047}},{"source":"core_modules/web_socket.js","original":{"line":35,"column":9},"generated":{"line":1,"column":1052}},{"source":"core_modules/web_socket.js","name":"conn","original":{"line":39,"column":1},"generated":{"line":1,"column":1059}},{"source":"core_modules/web_socket.js","name":"addEventListener","original":{"line":39,"column":6},"generated":{"line":1,"column":1061}},{"source":"core_modules/web_socket.js","original":{"line":39,"column":23},"generated":{"line":1,"column":1078}},{"source":"core_modules/web_socket.js","original":{"line":39,"column":35},"generated":{"line":1,"column":1088}},{"source":"core_modules/web_socket.js","name":"event","original":{"line":39,"column":45},"generated":{"line":1,"column":1097}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":41,"column":10},"generated":{"line":1,"column":1100}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":41,"column":10},"generated":{"line":1,"column":1105}},{"source":"core_modules/web_socket.js","name":"util","original":{"line":41,"column":23},"generated":{"line":1,"column":1118}},{"source":"core_modules/web_socket.js","name":"dict_vals_2_num","original":{"line":41,"column":28},"generated":{"line":1,"column":1120}},{"source":"core_modules/web_socket.js","name":"dict_vals_2_num","original":{"line":41,"column":28},"generated":{"line":1,"column":1128}},{"source":"core_modules/web_socket.js","name":"JSON","original":{"line":41,"column":44},"generated":{"line":1,"column":1144}},{"source":"core_modules/web_socket.js","name":"parse","original":{"line":41,"column":49},"generated":{"line":1,"column":1149}},{"source":"core_modules/web_socket.js","name":"event","original":{"line":41,"column":55},"generated":{"line":1,"column":1155}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":41,"column":61},"generated":{"line":1,"column":1157}},{"source":"core_modules/web_socket.js","name":"bind","original":{"line":42,"column":4},"generated":{"line":1,"column":1166}},{"source":"core_modules/web_socket.js","original":{"line":42,"column":9},"generated":{"line":1,"column":1171}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":44,"column":6},"generated":{"line":1,"column":1178}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":44,"column":6},"generated":{"line":1,"column":1183}},{"source":"core_modules/web_socket.js","name":"conn","original":{"line":44,"column":19},"generated":{"line":1,"column":1194}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1198}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1199}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1203}},{"source":"core_modules/web_socket.js","original":{"line":50,"column":19},"generated":{"line":1,"column":1218}},{"source":"core_modules/web_socket.js","original":{"line":50,"column":19},"generated":{"line":1,"column":1224}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":51,"column":6},"generated":{"line":1,"column":1235}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":51,"column":6},"generated":{"line":1,"column":1240}},{"source":"core_modules/web_socket.js","original":{"line":51,"column":16},"generated":{"line":1,"column":1250}},{"source":"core_modules/web_socket.js","name":"type","original":{"line":51,"column":17},"generated":{"line":1,"column":1251}},{"source":"core_modules/web_socket.js","original":{"line":51,"column":24},"generated":{"line":1,"column":1256}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":51,"column":36},"generated":{"line":1,"column":1266}},{"source":"core_modules/web_socket.js","original":{"line":51,"column":43},"generated":{"line":1,"column":1271}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1283}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1284}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1288}},{"source":"core_modules/web_socket.js","original":{"line":57,"column":18},"generated":{"line":1,"column":1302}},{"source":"core_modules/web_socket.js","original":{"line":57,"column":18},"generated":{"line":1,"column":1308}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":58,"column":6},"generated":{"line":1,"column":1319}},{"source":"core_modules/web_socket.js","name":"send_json","original":{"line":58,"column":6},"generated":{"line":1,"column":1324}},{"source":"core_modules/web_socket.js","original":{"line":58,"column":16},"generated":{"line":1,"column":1334}},{"source":"core_modules/web_socket.js","name":"type","original":{"line":58,"column":17},"generated":{"line":1,"column":1335}},{"source":"core_modules/web_socket.js","original":{"line":58,"column":24},"generated":{"line":1,"column":1340}},{"source":"core_modules/web_socket.js","name":"data","original":{"line":58,"column":36},"generated":{"line":1,"column":1350}},{"source":"core_modules/web_socket.js","original":{"line":58,"column":43},"generated":{"line":1,"column":1355}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1366}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1367}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1371}},{"source":"core_modules/web_socket.js","name":"func","original":{"line":65,"column":21},"generated":{"line":1,"column":1390}},{"source":"core_modules/web_socket.js","name":"func","original":{"line":65,"column":21},"generated":{"line":1,"column":1396}},{"source":"core_modules/web_socket.js","name":"func","original":{"line":65,"column":21},"generated":{"line":1,"column":1405}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":66,"column":6},"generated":{"line":1,"column":1408}},{"source":"core_modules/web_socket.js","name":"data_handler","original":{"line":66,"column":6},"generated":{"line":1,"column":1413}},{"source":"core_modules/web_socket.js","name":"func","original":{"line":66,"column":21},"generated":{"line":1,"column":1426}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1430}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1431}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1435}},{"source":"core_modules/web_socket.js","name":"obj","original":{"line":73,"column":14},"generated":{"line":1,"column":1447}},{"source":"core_modules/web_socket.js","name":"obj","original":{"line":73,"column":14},"generated":{"line":1,"column":1453}},{"source":"core_modules/web_socket.js","name":"obj","original":{"line":73,"column":14},"generated":{"line":1,"column":1462}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":74,"column":6},"generated":{"line":1,"column":1465}},{"source":"core_modules/web_socket.js","name":"connection","original":{"line":74,"column":6},"generated":{"line":1,"column":1470}},{"source":"core_modules/web_socket.js","name":"send","original":{"line":74,"column":17},"generated":{"line":1,"column":1481}},{"source":"core_modules/web_socket.js","name":"JSON","original":{"line":74,"column":22},"generated":{"line":1,"column":1486}},{"source":"core_modules/web_socket.js","name":"stringify","original":{"line":74,"column":27},"generated":{"line":1,"column":1491}},{"source":"core_modules/web_socket.js","name":"obj","original":{"line":74,"column":37},"generated":{"line":1,"column":1501}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1509}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1511}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1514}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1522}},{"source":"core_modules/web_socket.js","original":{"line":75,"column":5},"generated":{"line":1,"column":1530}}],"sources":{"core_modules/web_socket.js":"// Sat Sep 29 18:31:15 PDT 2018\n\nimport {makeLogger} from \"./logger.js\"\nimport util from \"../module_resources/utils.js\"\n\n/**\n * Manages the websocket connection to an incoming data stream.\n *\n * @param {String} url - The websocket url to connect to, e.g. ws://localhost:1234\n */\nexport default class web_socket {\n    \n    constructor(url) { \n\tthis.url = url ;  \n\tthis.connection = null ;  \n\tthis.log = makeLogger(\"WS\")\n\tthis.default_handler = function(data) { \n\t    this.log(\"No data handler has been defined!\") \n\t} \n\tthis.data_handler = this.default_handler \n    } \n    \n    \n    /**\n     * Connect to remote websocket server. Upon success, registers the websocket connection\n     * as \"client\" with the server, enables streaming, and this.logs to console. \n     */ \n    connect() { \n\tvar conn  = new WebSocket(this.url) ; \n\t// Connection opened\n\tconn.addEventListener('open', (function (event) {\n\t    this.log(\"Connection to \" + this.url + \" successful. Registering client with server.\")\n\t    this.send_json({type: \"register\" , data : \"client\" })\n\t    this.send_json({type: \"control\"  , data : \"start\"  }) \n\t}).bind(this)) //bind is necessary for web_socket class vs WebSocket instance! \n\n\t\n\t// Listen for messages\n\tconn.addEventListener('message', (function (event) {\n\t    //this.log(\"Received msg: \" + event.data) \n\t    this.data_handler(util.dict_vals_2_num(JSON.parse(event.data))) //parse json and convert nums\n\t}).bind(this)) //bind is necessary for web_socket class vs WebSocket instance! \n\t\n\tthis.connection = conn ; \n    } \n    \n    /** \n     * Start accepting incoming raw data objects.\n     */ \n    start_stream() { \n\tthis.send_json({type : \"control\" , data : \"start\" } ) \n    }\n\n    /** \n     * Stop accepting incoming raw data objects.\n     */ \n    stop_stream() { \n\tthis.send_json({type : \"control\" , data : \"stop\" } ) \n    }\n\n    /** \n     * Sets the data_handler attribute, which determines what the socket does to incomin data.\n     * @param {Function} func - Function which accepts ONE raw data object {..} and processes it.\n     */ \n    set_data_handler(func) { \n\tthis.data_handler = func ; \n    }\n\n    /** \n     * Sends JSON data through socket. \n     * @param {Object} obj - Data object to send \n     */ \n    send_json(obj) { \n\tthis.connection.send(JSON.stringify(obj))\n    }\n\n    \n    \n}\n\n"},"lineCount":null}},"hash":"b263d40faf4fa2ff65e0eafc6351edf5","cacheData":{"env":{}}}