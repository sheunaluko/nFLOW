{"id":"YJSl","dependencies":[{"name":"/Users/oluwa/dev/webrt_state_machine/package.json","includedInParent":true,"mtime":1540304235496},{"name":"../core_modules/logger.js","loc":{"line":5,"column":21},"parent":"/Users/oluwa/dev/webrt_state_machine/src/module_resources/state_machine_elements.js","resolved":"/Users/oluwa/dev/webrt_state_machine/src/core_modules/logger.js"},{"name":"./utils.js","loc":{"line":6,"column":21},"parent":"/Users/oluwa/dev/webrt_state_machine/src/module_resources/state_machine_elements.js","resolved":"/Users/oluwa/dev/webrt_state_machine/src/module_resources/utils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.sme=void 0;var e=require(\"../core_modules/logger.js\"),r=t(require(\"./utils.js\"));function t(e){return e&&e.__esModule?e:{default:e}}e.logger.register(\"sme\");var n={sensors:{dev_a:{},dev_b:{}},transitioners:{}};exports.sme=n,n.sensors.field=function(e){return function(t){return r.default.last(t)[e]}},n.sensors.field_diff=function(e){return function(r){var t=r.length;return r[t-1][e]-r[t-2][e]}},n.is_dev_b=function(e){return\"B\"==e.dev},n.is_dev_a=function(e){return\"A\"==e.dev},n.sensors.dev_b.field=function(e){return function(t){return d=r.default.last(t),\"B\"==d.dev?d[e]:(r.default.debug(\"filter miss\"),!1)}},n.transitioners.test_turn_on={detector:function(e){return!e.STATE.is_on},applicator:function(r){r.STATE.is_on=!0,r.debug_mode&&e.logger.sme(\"TURNED ON\")},group:\"switch\"},n.transitioners.test_turn_off={detector:function(e){return e.STATE.is_on},applicator:function(r){r.STATE.is_on=!1,r.debug_mode&&e.logger.sme(\"TURNED OFF\")},group:\"switch\"};","map":{"mappings":[{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":0}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":13}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":20}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":35}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":43}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":56}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":57}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":64}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":68}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":76}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":85}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":5,"column":0},"generated":{"line":1,"column":87}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":5,"column":0},"generated":{"line":1,"column":91}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":5,"column":0},"generated":{"line":1,"column":93}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":5,"column":0},"generated":{"line":1,"column":101}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":6,"column":0},"generated":{"line":1,"column":130}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":6,"column":0},"generated":{"line":1,"column":132}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":6,"column":0},"generated":{"line":1,"column":134}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":6,"column":0},"generated":{"line":1,"column":142}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":157}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":166}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":168}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":171}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":178}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":181}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":183}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":194}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":196}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":197}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":205}},{"source":"src/module_resources/state_machine_elements.js","name":"logger","original":{"line":8,"column":0},"generated":{"line":1,"column":208}},{"source":"src/module_resources/state_machine_elements.js","name":"register","original":{"line":8,"column":7},"generated":{"line":1,"column":210}},{"source":"src/module_resources/state_machine_elements.js","name":"register","original":{"line":8,"column":7},"generated":{"line":1,"column":217}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":8,"column":16},"generated":{"line":1,"column":226}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":10,"column":0},"generated":{"line":1,"column":233}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":10,"column":4},"generated":{"line":1,"column":237}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":10,"column":10},"generated":{"line":1,"column":239}},{"source":"src/module_resources/state_machine_elements.js","name":"sensors","original":{"line":10,"column":12},"generated":{"line":1,"column":240}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":10,"column":22},"generated":{"line":1,"column":248}},{"source":"src/module_resources/state_machine_elements.js","name":"dev_a","original":{"line":10,"column":24},"generated":{"line":1,"column":249}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":10,"column":32},"generated":{"line":1,"column":255}},{"source":"src/module_resources/state_machine_elements.js","name":"dev_b","original":{"line":10,"column":37},"generated":{"line":1,"column":258}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":10,"column":45},"generated":{"line":1,"column":264}},{"source":"src/module_resources/state_machine_elements.js","name":"transitioners","original":{"line":11,"column":5},"generated":{"line":1,"column":268}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":11,"column":21},"generated":{"line":1,"column":282}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":286}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":294}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":0},"generated":{"line":1,"column":298}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":16,"column":0},"generated":{"line":1,"column":300}},{"source":"src/module_resources/state_machine_elements.js","name":"sensors","original":{"line":16,"column":4},"generated":{"line":1,"column":302}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":16,"column":12},"generated":{"line":1,"column":310}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":16,"column":20},"generated":{"line":1,"column":316}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":16,"column":29},"generated":{"line":1,"column":325}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":17,"column":11},"generated":{"line":1,"column":328}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":17,"column":11},"generated":{"line":1,"column":335}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":17,"column":20},"generated":{"line":1,"column":344}},{"source":"src/module_resources/state_machine_elements.js","name":"util","original":{"line":18,"column":8},"generated":{"line":1,"column":347}},{"source":"src/module_resources/state_machine_elements.js","name":"util","original":{"line":18,"column":8},"generated":{"line":1,"column":354}},{"source":"src/module_resources/state_machine_elements.js","name":"last","original":{"line":18,"column":13},"generated":{"line":1,"column":356}},{"source":"src/module_resources/state_machine_elements.js","name":"last","original":{"line":18,"column":13},"generated":{"line":1,"column":364}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":18,"column":18},"generated":{"line":1,"column":369}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":18,"column":21},"generated":{"line":1,"column":372}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":23,"column":0},"generated":{"line":1,"column":377}},{"source":"src/module_resources/state_machine_elements.js","name":"sensors","original":{"line":23,"column":4},"generated":{"line":1,"column":379}},{"source":"src/module_resources/state_machine_elements.js","name":"field_diff","original":{"line":23,"column":12},"generated":{"line":1,"column":387}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":23,"column":25},"generated":{"line":1,"column":398}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":23,"column":34},"generated":{"line":1,"column":407}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":24,"column":11},"generated":{"line":1,"column":410}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":24,"column":11},"generated":{"line":1,"column":417}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":24,"column":20},"generated":{"line":1,"column":426}},{"source":"src/module_resources/state_machine_elements.js","name":"l","original":{"line":25,"column":5},"generated":{"line":1,"column":429}},{"source":"src/module_resources/state_machine_elements.js","name":"l","original":{"line":25,"column":5},"generated":{"line":1,"column":433}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":25,"column":9},"generated":{"line":1,"column":435}},{"source":"src/module_resources/state_machine_elements.js","name":"length","original":{"line":25,"column":11},"generated":{"line":1,"column":437}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":26,"column":8},"generated":{"line":1,"column":444}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":26,"column":8},"generated":{"line":1,"column":451}},{"source":"src/module_resources/state_machine_elements.js","name":"l","original":{"line":26,"column":10},"generated":{"line":1,"column":453}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":26,"column":12},"generated":{"line":1,"column":455}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":26,"column":15},"generated":{"line":1,"column":458}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":26,"column":24},"generated":{"line":1,"column":461}},{"source":"src/module_resources/state_machine_elements.js","name":"l","original":{"line":26,"column":26},"generated":{"line":1,"column":463}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":26,"column":28},"generated":{"line":1,"column":465}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":26,"column":31},"generated":{"line":1,"column":468}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":32,"column":0},"generated":{"line":1,"column":473}},{"source":"src/module_resources/state_machine_elements.js","name":"is_dev_b","original":{"line":32,"column":4},"generated":{"line":1,"column":475}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":32,"column":15},"generated":{"line":1,"column":484}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":32,"column":25},"generated":{"line":1,"column":493}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":33,"column":11},"generated":{"line":1,"column":496}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":33,"column":20},"generated":{"line":1,"column":502}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":33,"column":11},"generated":{"line":1,"column":507}},{"source":"src/module_resources/state_machine_elements.js","name":"dev","original":{"line":33,"column":13},"generated":{"line":1,"column":509}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":36,"column":0},"generated":{"line":1,"column":514}},{"source":"src/module_resources/state_machine_elements.js","name":"is_dev_a","original":{"line":36,"column":4},"generated":{"line":1,"column":516}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":36,"column":15},"generated":{"line":1,"column":525}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":36,"column":25},"generated":{"line":1,"column":534}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":37,"column":11},"generated":{"line":1,"column":537}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":37,"column":20},"generated":{"line":1,"column":543}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":37,"column":11},"generated":{"line":1,"column":548}},{"source":"src/module_resources/state_machine_elements.js","name":"dev","original":{"line":37,"column":13},"generated":{"line":1,"column":550}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":40,"column":0},"generated":{"line":1,"column":555}},{"source":"src/module_resources/state_machine_elements.js","name":"sensors","original":{"line":40,"column":4},"generated":{"line":1,"column":557}},{"source":"src/module_resources/state_machine_elements.js","name":"dev_b","original":{"line":40,"column":12},"generated":{"line":1,"column":565}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":40,"column":18},"generated":{"line":1,"column":571}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":40,"column":26},"generated":{"line":1,"column":577}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":40,"column":35},"generated":{"line":1,"column":586}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":42,"column":11},"generated":{"line":1,"column":589}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":42,"column":11},"generated":{"line":1,"column":596}},{"source":"src/module_resources/state_machine_elements.js","name":"buf","original":{"line":42,"column":20},"generated":{"line":1,"column":605}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":44,"column":5},"generated":{"line":1,"column":608}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":43,"column":1},"generated":{"line":1,"column":615}},{"source":"src/module_resources/state_machine_elements.js","name":"util","original":{"line":43,"column":5},"generated":{"line":1,"column":617}},{"source":"src/module_resources/state_machine_elements.js","name":"last","original":{"line":43,"column":10},"generated":{"line":1,"column":619}},{"source":"src/module_resources/state_machine_elements.js","name":"last","original":{"line":43,"column":10},"generated":{"line":1,"column":627}},{"source":"src/module_resources/state_machine_elements.js","name":"buf","original":{"line":43,"column":15},"generated":{"line":1,"column":632}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":44,"column":14},"generated":{"line":1,"column":635}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":44,"column":5},"generated":{"line":1,"column":640}},{"source":"src/module_resources/state_machine_elements.js","name":"dev","original":{"line":44,"column":7},"generated":{"line":1,"column":642}},{"source":"src/module_resources/state_machine_elements.js","name":"d","original":{"line":45,"column":12},"generated":{"line":1,"column":646}},{"source":"src/module_resources/state_machine_elements.js","name":"field","original":{"line":45,"column":14},"generated":{"line":1,"column":648}},{"source":"src/module_resources/state_machine_elements.js","name":"debug","original":{"line":47,"column":10},"generated":{"line":1,"column":652}},{"source":"src/module_resources/state_machine_elements.js","name":"debug","original":{"line":47,"column":10},"generated":{"line":1,"column":654}},{"source":"src/module_resources/state_machine_elements.js","name":"debug","original":{"line":47,"column":10},"generated":{"line":1,"column":662}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":47,"column":16},"generated":{"line":1,"column":668}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":48,"column":12},"generated":{"line":1,"column":684}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":52,"column":0},"generated":{"line":1,"column":689}},{"source":"src/module_resources/state_machine_elements.js","name":"transitioners","original":{"line":52,"column":4},"generated":{"line":1,"column":691}},{"source":"src/module_resources/state_machine_elements.js","name":"test_turn_on","original":{"line":52,"column":18},"generated":{"line":1,"column":705}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":52,"column":34},"generated":{"line":1,"column":718}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":53,"column":17},"generated":{"line":1,"column":719}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":53,"column":17},"generated":{"line":1,"column":728}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":53,"column":26},"generated":{"line":1,"column":737}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":54,"column":8},"generated":{"line":1,"column":740}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":54,"column":9},"generated":{"line":1,"column":747}},{"source":"src/module_resources/state_machine_elements.js","name":"STATE","original":{"line":54,"column":23},"generated":{"line":1,"column":749}},{"source":"src/module_resources/state_machine_elements.js","name":"is_on","original":{"line":54,"column":29},"generated":{"line":1,"column":755}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":57,"column":19},"generated":{"line":1,"column":762}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":57,"column":19},"generated":{"line":1,"column":773}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":57,"column":28},"generated":{"line":1,"column":782}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":58,"column":1},"generated":{"line":1,"column":785}},{"source":"src/module_resources/state_machine_elements.js","name":"STATE","original":{"line":58,"column":15},"generated":{"line":1,"column":787}},{"source":"src/module_resources/state_machine_elements.js","name":"is_on","original":{"line":58,"column":21},"generated":{"line":1,"column":793}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":58,"column":29},"generated":{"line":1,"column":800}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":59,"column":5},"generated":{"line":1,"column":802}},{"source":"src/module_resources/state_machine_elements.js","name":"debug_mode","original":{"line":59,"column":19},"generated":{"line":1,"column":804}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":59,"column":41},"generated":{"line":1,"column":816}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":59,"column":41},"generated":{"line":1,"column":818}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":59,"column":41},"generated":{"line":1,"column":825}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":59,"column":45},"generated":{"line":1,"column":829}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":61,"column":14},"generated":{"line":1,"column":843}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":61,"column":14},"generated":{"line":1,"column":849}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":65,"column":0},"generated":{"line":1,"column":859}},{"source":"src/module_resources/state_machine_elements.js","name":"transitioners","original":{"line":65,"column":4},"generated":{"line":1,"column":861}},{"source":"src/module_resources/state_machine_elements.js","name":"test_turn_off","original":{"line":65,"column":18},"generated":{"line":1,"column":875}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":65,"column":35},"generated":{"line":1,"column":889}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":66,"column":17},"generated":{"line":1,"column":890}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":66,"column":17},"generated":{"line":1,"column":899}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":66,"column":26},"generated":{"line":1,"column":908}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":67,"column":8},"generated":{"line":1,"column":911}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":67,"column":8},"generated":{"line":1,"column":918}},{"source":"src/module_resources/state_machine_elements.js","name":"STATE","original":{"line":67,"column":22},"generated":{"line":1,"column":920}},{"source":"src/module_resources/state_machine_elements.js","name":"is_on","original":{"line":67,"column":28},"generated":{"line":1,"column":926}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":69,"column":19},"generated":{"line":1,"column":933}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":69,"column":19},"generated":{"line":1,"column":944}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":69,"column":28},"generated":{"line":1,"column":953}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":70,"column":1},"generated":{"line":1,"column":956}},{"source":"src/module_resources/state_machine_elements.js","name":"STATE","original":{"line":70,"column":15},"generated":{"line":1,"column":958}},{"source":"src/module_resources/state_machine_elements.js","name":"is_on","original":{"line":70,"column":21},"generated":{"line":1,"column":964}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":70,"column":29},"generated":{"line":1,"column":971}},{"source":"src/module_resources/state_machine_elements.js","name":"state_machine","original":{"line":71,"column":5},"generated":{"line":1,"column":973}},{"source":"src/module_resources/state_machine_elements.js","name":"debug_mode","original":{"line":71,"column":19},"generated":{"line":1,"column":975}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":71,"column":41},"generated":{"line":1,"column":987}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":71,"column":41},"generated":{"line":1,"column":989}},{"source":"src/module_resources/state_machine_elements.js","name":"sme","original":{"line":71,"column":41},"generated":{"line":1,"column":996}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":71,"column":45},"generated":{"line":1,"column":1000}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":73,"column":14},"generated":{"line":1,"column":1015}},{"source":"src/module_resources/state_machine_elements.js","original":{"line":73,"column":14},"generated":{"line":1,"column":1021}}],"sources":{"src/module_resources/state_machine_elements.js":"//Fri Oct  5 19:31:23 PDT 2018\n\n// filefor collecting definitions of Sensors and transitioners\n\nimport {logger} from \"../core_modules/logger.js\"\nimport util     from \"./utils.js\"\n\nlogger.register(\"sme\") \n\nvar sme = { sensors : { dev_a : {} , dev_b : {} } , \n\t    transitioners : {} }  \n\n\n//extract a specific field from the data objects \n//i.e. [{:acc_x :acc_y... } , ... ] => [ acc_x, acc_x ... ] \nsme.sensors.field = function(field) { \n    return function(d) { \n\treturn util.last(d)[field] \n    }\n} \n\n//field diff will take the  diff of a particular field in the data object \nsme.sensors.field_diff = function(field) { \n    return function(d) { \n\tvar l = d.length \n\treturn d[l-1][field] - d[l-2][field]\n    }\n} \n\n\n\nsme.is_dev_b = function (d) { \n    return d.dev == \"B\" \n} \n\nsme.is_dev_a = function (d) { \n    return d.dev == \"A\" \n} \n\nsme.sensors.dev_b.field = function(field) { \n    //return sme.generic_filter(sme.is_dev_b , d=>d[field] ) \n    return function(buf) {\n\td = util.last(buf) \n\tif (d.dev == \"B\") { \n\t    return d[field]\n\t} else { \n\t    util.debug(\"filter miss\")\n\t    return false }\n    }\n}\n\nsme.transitioners.test_turn_on  = { \n    \"detector\" : function(state_machine) { \n\treturn !state_machine.STATE.is_on \n\t\n    } , \n    \"applicator\" : function(state_machine) { \n\tstate_machine.STATE.is_on = true \n\tif (state_machine.debug_mode ) { logger.sme(\"TURNED ON\") }\n    },\n    \"group\" : \"switch\" \n}\n\n\nsme.transitioners.test_turn_off  = { \n    \"detector\" : function(state_machine) { \n\treturn state_machine.STATE.is_on \n    } , \n    \"applicator\" : function(state_machine) { \n\tstate_machine.STATE.is_on = false  \n\tif (state_machine.debug_mode ) { logger.sme(\"TURNED OFF\") }\n    } , \n    \"group\" : \"switch\" \n}\n\n\n\n\nexport { sme } \n"},"lineCount":null}},"hash":"04257799b81b56a511c47f0e10c44301","cacheData":{"env":{}}}